[{"F:\\WebDev\\Chat\\client\\src\\index.js":"1","F:\\WebDev\\Chat\\client\\src\\App.js":"2","F:\\WebDev\\Chat\\client\\src\\pages\\signInPage.js":"3","F:\\WebDev\\Chat\\client\\src\\pages\\MainPage.js":"4","F:\\WebDev\\Chat\\client\\src\\pages\\signUpPage.js":"5"},{"size":374,"mtime":1662737790458,"results":"6","hashOfConfig":"7"},{"size":620,"mtime":1663185261192,"results":"8","hashOfConfig":"7"},{"size":1262,"mtime":1664206795512,"results":"9","hashOfConfig":"7"},{"size":5353,"mtime":1664476089358,"results":"10","hashOfConfig":"7"},{"size":1135,"mtime":1663185203050,"results":"11","hashOfConfig":"7"},{"filePath":"12","messages":"13","suppressedMessages":"14","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"15"},"rqr2rk",{"filePath":"16","messages":"17","suppressedMessages":"18","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"15"},{"filePath":"19","messages":"20","suppressedMessages":"21","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"22","usedDeprecatedRules":"23"},{"filePath":"24","messages":"25","suppressedMessages":"26","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"27"},{"filePath":"28","messages":"29","suppressedMessages":"30","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"31","usedDeprecatedRules":"15"},"F:\\WebDev\\Chat\\client\\src\\index.js",[],[],[],"F:\\WebDev\\Chat\\client\\src\\App.js",[],[],"F:\\WebDev\\Chat\\client\\src\\pages\\signInPage.js",["32"],[],"import React, { useState, useEffect } from \"react\";\r\nimport \"./signInPage.css\";\r\nimport Axios from \"axios\";\r\n\r\nfunction SignInPage() {\r\n  const [userName, SetuserName] = useState(\"\");\r\n  const [password, Setpassword] = useState(\"\");\r\n\r\n  const signIn = () => {\r\n    Axios.post(\"https://whitakert.com/Chat/API/SignIn\", {\r\n      username: userName,\r\n      password: password,\r\n    }).then((response) => {\r\n      if (response.data !== null) {\r\n        document.cookie = \"uid=\" + response.data;\r\n        console.log(document.cookie);\r\n        window.location.replace(\"https://whitakert.com/Chat/main\");\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"parent\">\r\n      <div className=\"spacer\" />\r\n      <h1 id=\"title\">Sign In</h1>\r\n      <input\r\n        className=\"txtin\"\r\n        type=\"text\"\r\n        placeholder=\"Username\"\r\n        onChange={(e) => SetuserName(e.target.value)}\r\n      ></input>\r\n      <input\r\n        className=\"txtin\"\r\n        type=\"text\"\r\n        placeholder=\"Password\"\r\n        onChange={(e) => Setpassword(e.target.value)}\r\n      ></input>\r\n      <button\r\n        className=\"btn\"\r\n        onClick={() => {\r\n          signIn();\r\n        }}\r\n      >\r\n        Sign In\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SignInPage;\r\n",[],"F:\\WebDev\\Chat\\client\\src\\pages\\MainPage.js",["33","34"],[],"import axios, { Axios } from \"axios\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport \"./MainPage.css\";\r\nconst { io } = require(\"socket.io-client\");\r\nvar socket = io(\"wss://whitakert.com:443\");\r\n\r\nconsole.log(socket);\r\nfunction delay(time) {\r\n  return new Promise((resolve) => setTimeout(resolve, time));\r\n}\r\n\r\nconst createMessage = (message) => {\r\n  let m = document.createElement(\"div\");\r\n  let mChild = document.createElement(\"div\");\r\n  mChild.className = \"Cinfo\";\r\n  m.appendChild(mChild);\r\n  let mChild2 = document.createElement(\"div\");\r\n  mChild2.className = \"Cmessage\";\r\n  m.appendChild(mChild2);\r\n\r\n  let namediv = document.createElement(\"div\");\r\n  let datediv = document.createElement(\"div\");\r\n  namediv.className = \"Cname\";\r\n  datediv.className = \"Cdate\";\r\n  mChild.appendChild(namediv);\r\n  mChild.appendChild(datediv);\r\n\r\n  namediv.innerHTML = message[0];\r\n  datediv.innerHTML = message[2];\r\n  mChild2.innerHTML = message[1];\r\n  m.className = \"msg\";\r\n  document.getElementById(\"chatContainer\").appendChild(m);\r\n};\r\n\r\nsocket.on(\"recieveMessage\", (message) => {\r\n  createMessage(message);\r\n});\r\n\r\ndocument.addEventListener(\"keyup\", function (event) {\r\n  if (event.code === \"Enter\") {\r\n    console.log(\"enter\");\r\n    //SendMessage();\r\n  }\r\n});\r\n\r\nfunction MainPage() {\r\n  //\r\n\r\n  const [selectedFriendID, SetFriendID] = useState();\r\n  const [friendName, SetfriendName] = useState(\"\");\r\n  const [message, SetMessage] = useState(\"\");\r\n\r\n  socket.on(\"connect\", () => {\r\n    startconnect();\r\n  });\r\n\r\n  const addFriend = () => {\r\n    socket.emit(\"addFriend\", friendName);\r\n  };\r\n\r\n  const getFriendsList = () => {\r\n    socket.emit(\"getFriendsList\");\r\n  };\r\n\r\n  socket.on(\"verified\", () => {\r\n    getFriendsList();\r\n  });\r\n\r\n  socket.on(\"FriendsList\", (result) => {\r\n    let j = document.getElementById(\"FriendsList\").children.length;\r\n    for (let i = 0; i < j; i++) {\r\n      document.getElementById(\"FriendsList\").children[0].remove();\r\n    }\r\n\r\n    for (let i = 0; i < result.length; i++) {\r\n      const f = document.createElement(\"button\");\r\n      f.innerHTML = result[i].name;\r\n      f.className = \"FriendItem\";\r\n      f.id = result[i].id;\r\n      f.onclick = () => {\r\n        selectFriend(f.id);\r\n      };\r\n      document.getElementById(\"FriendsList\").appendChild(f);\r\n    }\r\n  });\r\n\r\n  const selectFriend = (id) => {\r\n    //get old messages from mysql\r\n\r\n    let parent = document.getElementById(\"chatContainer\");\r\n    while (parent.firstChild) {\r\n      parent.removeChild(parent.firstChild);\r\n    }\r\n\r\n    axios\r\n      .post(\"https://whitakert.com/Chat/API/GetMessages\", {\r\n        Uid: socket.id,\r\n        Fid: id,\r\n      })\r\n      .then((response) => {\r\n        for (let i = 0; i < response.data[0].length; i++) {\r\n          createMessage(response.data[0][i]);\r\n        }\r\n      });\r\n\r\n    SetFriendID(id);\r\n    axios\r\n      .post(\"https://whitakert.com/Chat/API/getName\", { id })\r\n      .then((response) => {\r\n        document.getElementById(\"GroupName\").innerHTML = response.data[0].name;\r\n      });\r\n    socket.emit(\"SelectRoom\", id);\r\n  };\r\n\r\n  const sendMessage = () => {\r\n    var today = new Date();\r\n    var dateTime =\r\n      today.getFullYear() +\r\n      \"-\" +\r\n      (today.getMonth() + 1) +\r\n      \"-\" +\r\n      today.getDate() +\r\n      \" \" +\r\n      today.getHours() +\r\n      \":\" +\r\n      today.getMinutes() +\r\n      \":\" +\r\n      today.getSeconds();\r\n\r\n    socket.emit(\"SendMessage\", [selectedFriendID, message, dateTime]);\r\n    document.getElementById(\"txt\").value = \"\";\r\n  };\r\n\r\n  async function SendMessage() {\r\n    await delay(Math.random() * 1000);\r\n\r\n    sendMessage();\r\n  }\r\n\r\n  MainPage.SendMessage = SendMessage;\r\n\r\n  async function startconnect() {\r\n    //wait random time then send verify, kinda dumb but it works, ill fix later\r\n    await delay(Math.random() * 1000);\r\n    for (let i = 0; i < document.cookie.length; i++) {\r\n      if (document.cookie.substring(i, i + 4) === \"uid=\") {\r\n        socket.emit(\r\n          \"verify\",\r\n          document.cookie.substring(i + 4, document.cookie.length)\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"MParent\" id=\"Mparent\">\r\n      <div className=\"container\" id=\"Friends\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Friend's name\"\r\n          id=\"frtxt\"\r\n          onChange={(e) => {\r\n            SetfriendName(e.target.value);\r\n          }}\r\n        ></input>\r\n        <button\r\n          id=\"frbtn\"\r\n          onClick={() => {\r\n            addFriend();\r\n          }}\r\n        >\r\n          Add Friend\r\n        </button>\r\n        <div id=\"FriendsList\"></div>\r\n      </div>\r\n      <div className=\"container\" id=\"Chat\">\r\n        <div id=\"chatHeader\">\r\n          <h1 id=\"GroupName\">Group/Username</h1>\r\n          <h3>Members</h3>\r\n        </div>\r\n        <div id=\"chatContainer\">\r\n          <div>chat!</div>\r\n        </div>\r\n\r\n        <div id=\"inputContainer\">\r\n          <textarea\r\n            id=\"txt\"\r\n            onChange={(e) => {\r\n              SetMessage(e.target.value);\r\n            }}\r\n          ></textarea>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\ndocument.addEventListener(\"keyup\", function (event) {\r\n  socket.emit(\"keycodepressed\", event.code);\r\n  console.log(event.code);\r\n\r\n  if (event.code === \"Enter\") {\r\n    console.log(\"enter\");\r\n    MainPage.SendMessage();\r\n  }\r\n});\r\n\r\nexport default MainPage;\r\n","F:\\WebDev\\Chat\\client\\src\\pages\\signUpPage.js",["35"],[],"import React, { useState, useEffect } from \"react\";\r\nimport \"./signInPage.css\";\r\nimport Axios from \"axios\";\r\n\r\nfunction SignUpPage() {\r\n  const [userName, SetuserName] = useState(\"\");\r\n  const [password, Setpassword] = useState(\"\");\r\n\r\n  const signUp = () => {\r\n    Axios.post(\"https://whitakert.com/Chat/API/SignUp\", {\r\n      username: userName,\r\n      password: password,\r\n    }).then((response) => {\r\n      if (response.data === \"success\") {\r\n        alert(\"success\");\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"parent\">\r\n      <div className=\"spacer\" />\r\n      <h1 id=\"title\">Sign Up</h1>\r\n      <input\r\n        className=\"txtin\"\r\n        type=\"text\"\r\n        placeholder=\"Username\"\r\n        onChange={(e) => SetuserName(e.target.value)}\r\n      ></input>\r\n      <input\r\n        className=\"txtin\"\r\n        type=\"text\"\r\n        placeholder=\"Password\"\r\n        onChange={(e) => Setpassword(e.target.value)}\r\n      ></input>\r\n      <button\r\n        className=\"btn\"\r\n        onClick={() => {\r\n          signUp();\r\n        }}\r\n      >\r\n        Sign Up\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SignUpPage;\r\n",{"ruleId":"36","severity":1,"message":"37","line":1,"column":27,"nodeType":"38","messageId":"39","endLine":1,"endColumn":36},{"ruleId":"36","severity":1,"message":"40","line":1,"column":17,"nodeType":"38","messageId":"39","endLine":1,"endColumn":22},{"ruleId":"36","severity":1,"message":"37","line":2,"column":27,"nodeType":"38","messageId":"39","endLine":2,"endColumn":36},{"ruleId":"36","severity":1,"message":"37","line":1,"column":27,"nodeType":"38","messageId":"39","endLine":1,"endColumn":36},"no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar","'Axios' is defined but never used."]